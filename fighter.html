<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Street Fighter Stick Figures</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(to bottom, #1a1a2e, #16213e);
            color: white;
            font-family: 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        
        h1 {
            text-shadow: 0 0 10px #00f7ff;
            margin-bottom: 10px;
            font-size: 36px;
        }
        
        .game-container {
            position: relative;
            margin: 20px 0;
        }
        
        #gameCanvas {
            background: linear-gradient(to bottom, #87CEEB, #ffffff);
            border: 3px solid #333;
            box-shadow: 0 0 20px rgba(0, 247, 255, 0.5);
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            width: 800px;
            margin: 20px 0;
        }
        
        .player-controls {
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #00f7ff;
            width: 380px;
        }
        
        .player-controls h3 {
            margin-top: 0;
            color: #00f7ff;
        }
        
        .health-container {
            display: flex;
            justify-content: space-between;
            width: 800px;
            margin-bottom: 10px;
        }
        
        .player-info {
            width: 300px;
        }
        
        .health-bar {
            width: 100%;
            height: 30px;
            background: #333;
            border: 2px solid #000;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 5px;
        }
        
        .health-fill {
            height: 100%;
            transition: width 0.3s;
        }
        
        #player1Health {
            background: linear-gradient(to right, #ff0000, #ff6a00);
        }
        
        #player2Health {
            background: linear-gradient(to right, #00ff00, #006a00);
        }
        
        .winner-display {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 48px;
            font-weight: bold;
            text-shadow: 0 0 10px black;
            background: rgba(0, 0, 0, 0.7);
            padding: 20px;
            border-radius: 10px;
            display: none;
        }
        
        .restart-button {
            background: #00f7ff;
            color: #000;
            border: none;
            padding: 10px 20px;
            font-size: 18px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 20px;
            font-weight: bold;
        }
        
        .restart-button:hover {
            background: #00aaff;
        }
        
        .round-display {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
            font-weight: bold;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 20px;
            border-radius: 10px;
            border: 2px solid #00f7ff;
        }
        
        .special-move {
            margin-top: 10px;
            font-style: italic;
            color: #00f7ff;
        }
    </style>
</head>
<body>
    <h1>Street Fighter Stick Figures</h1>
    
    <div class="health-container">
        <div class="player-info">
            <h3>Player 1 - RED FIGHTER</h3>
            <div class="health-bar">
                <div id="player1Health" class="health-fill" style="width: 100%;"></div>
            </div>
        </div>
        <div class="player-info">
            <h3>Player 2 - GREEN FIGHTER</h3>
            <div class="health-bar">
                <div id="player2Health" class="health-fill" style="width: 100%;"></div>
            </div>
        </div>
    </div>
    
    <div class="game-container">
        <div class="round-display">Round <span id="roundNumber">1</span></div>
        <canvas id="gameCanvas" width="800" height="400"></canvas>
        <div class="winner-display" id="winnerDisplay"></div>
    </div>
    
    <div class="controls">
        <div class="player-controls">
            <h3>Player 1 Controls</h3>
            <p>Move: W, A, S, D</p>
            <p>Jump: W (double tap)</p>
            <p>Attack: F (Punch)</p>
            <p class="special-move">Special: D + F (Uppercut)</p>
        </div>
        <div class="player-controls">
            <h3>Player 2 Controls</h3>
            <p>Move: O, K, L, ;</p>
            <p>Jump: O (double tap)</p>
            <p>Attack: J (Punch)</p>
            <p class="special-move">Special: K + J (Uppercut)</p>
        </div>
    </div>
    
    <button class="restart-button" onclick="restartGame()">Restart Game</button>

    <script>
        // Canvas setup
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const winnerDisplay = document.getElementById('winnerDisplay');
        const roundNumber = document.getElementById('roundNumber');
        
        // Game state
        let gameRunning = true;
        let round = 1;
        let particles = [];
        
        // Player class
        class Player {
            constructor(x, y, color, controls, name) {
                this.x = x;
                this.y = y;
                this.width = 40;
                this.height = 80;
                this.color = color;
                this.health = 100;
                this.maxHealth = 100;
                this.speed = 5;
                this.jumpPower = 15;
                this.velocityY = 0;
                this.gravity = 0.8;
                this.onGround = true;
                this.punching = false;
                this.kicking = false;
                this.uppercut = false;
                this.punchCooldown = 0;
                this.kickCooldown = 0;
                this.uppercutCooldown = 0;
                this.hitCooldown = 0;
                this.controls = controls;
                this.keys = {};
                this.facingRight = controls === 'wasd';
                this.name = name;
                this.lastJumpTime = 0;
                this.jumpCount = 0;
                this.attackType = '';
            }
            
            update() {
                // Apply gravity
                this.velocityY += this.gravity;
                this.y += this.velocityY;
                
                // Ground collision
                if (this.y > canvas.height - this.height - 20) {
                    this.y = canvas.height - this.height - 20;
                    this.velocityY = 0;
                    this.onGround = true;
                    this.jumpCount = 0;
                } else {
                    this.onGround = false;
                }
                
                // Movement
                if (this.keys[this.controls.left] && this.x > 0) {
                    this.x -= this.speed;
                    this.facingRight = false;
                }
                if (this.keys[this.controls.right] && this.x < canvas.width - this.width) {
                    this.x += this.speed;
                    this.facingRight = true;
                }
                
                // Jumping
                if (this.keys[this.controls.up]) {
                    const currentTime = Date.now();
                    if (this.onGround) {
                        this.velocityY = -this.jumpPower;
                        this.onGround = false;
                        this.jumpCount = 1;
                        this.lastJumpTime = currentTime;
                    } else if (this.jumpCount < 2 && currentTime - this.lastJumpTime > 200) {
                        this.velocityY = -this.jumpPower * 0.8;
                        this.jumpCount = 2;
                        this.lastJumpTime = currentTime;
                    }
                }
                
                // Attacks
                if (this.keys[this.controls.attack] && this.punchCooldown <= 0) {
                    this.punching = true;
                    this.attackType = 'punch';
                    this.punchCooldown = 15;
                }
                
                // Special move (uppercut)
                if (this.keys[this.controls.right] && this.keys[this.controls.attack] && this.uppercutCooldown <= 0) {
                    this.uppercut = true;
                    this.attackType = 'uppercut';
                    this.uppercutCooldown = 40;
                }
                
                // Cooldowns
                if (this.punchCooldown > 0) {
                    this.punchCooldown--;
                } else {
                    this.punching = false;
                }
                
                if (this.kickCooldown > 0) {
                    this.kickCooldown--;
                } else {
                    this.kicking = false;
                }
                
                if (this.uppercutCooldown > 0) {
                    this.uppercutCooldown--;
                } else {
                    this.uppercut = false;
                }
                
                if (this.hitCooldown > 0) {
                    this.hitCooldown--;
                }
            }
            
            draw() {
                // Draw stick figure
                ctx.strokeStyle = this.color;
                ctx.lineWidth = 3;
                ctx.beginPath();
                
                // Head
                ctx.arc(this.x + this.width/2, this.y + 15, 15, 0, Math.PI * 2);
                
                // Body
                ctx.moveTo(this.x + this.width/2, this.y + 30);
                ctx.lineTo(this.x + this.width/2, this.y + 60);
                
                // Arms
                let armOffsetX = this.facingRight ? 10 : -10;
                let armOffsetY = 0;
                
                if (this.punching) {
                    armOffsetX = this.facingRight ? 25 : -25;
                    armOffsetY = -5;
                } else if (this.uppercut) {
                    armOffsetX = this.facingRight ? 15 : -15;
                    armOffsetY = -25;
                }
                
                ctx.moveTo(this.x + this.width/2, this.y + 40);
                ctx.lineTo(this.x + this.width/2 + armOffsetX, this.y + 40 + armOffsetY);
                
                // Second arm
                ctx.moveTo(this.x + this.width/2, this.y + 45);
                ctx.lineTo(this.x + this.width/2 + (this.facingRight ? 10 : -10), this.y + 50);
                
                // Legs
                const legOffset = this.onGround ? 0 : 10;
                ctx.moveTo(this.x + this.width/2, this.y + 60);
                ctx.lineTo(this.x + this.width/2 - 10, this.y + 80 + legOffset);
                ctx.moveTo(this.x + this.width/2, this.y + 60);
                ctx.lineTo(this.x + this.width/2 + 10, this.y + 80 + legOffset);
                
                ctx.stroke();
                
                // Draw hit effect when hit
                if (this.hitCooldown > 0) {
                    ctx.fillStyle = 'rgba(255, 0, 0, 0.5)';
                    ctx.beginPath();
                    ctx.arc(this.x + this.width/2, this.y + 30, 25, 0, Math.PI * 2);
                    ctx.fill();
                }
            }
            
            getHitBox() {
                return {
                    x: this.x + 5,
                    y: this.y + 10,
                    width: this.width - 10,
                    height: this.height - 10
                };
            }
            
            getAttackBox() {
                if (this.punching) {
                    if (this.facingRight) {
                        return {
                            x: this.x + this.width,
                            y: this.y + 35,
                            width: 30,
                            height: 15
                        };
                    } else {
                        return {
                            x: this.x - 30,
                            y: this.y + 35,
                            width: 30,
                            height: 15
                        };
                    }
                } else if (this.uppercut) {
                    if (this.facingRight) {
                        return {
                            x: this.x + this.width,
                            y: this.y + 20,
                            width: 25,
                            height: 25
                        };
                    } else {
                        return {
                            x: this.x - 25,
                            y: this.y + 20,
                            width: 25,
                            height: 25
                        };
                    }
                }
                return {x: 0, y: 0, width: 0, height: 0};
            }
            
            takeDamage(damage) {
                if (this.hitCooldown <= 0) {
                    this.health -= damage;
                    this.hitCooldown = 20;
                    updateHealthBars();
                    
                    // Create hit particles
                    for (let i = 0; i < 10; i++) {
                        particles.push(new Particle(
                            this.x + this.width/2,
                            this.y + 30,
                            this.color
                        ));
                    }
                    
                    if (this.health <= 0) {
                        this.health = 0;
                        return true; // Player is dead
                    }
                }
                return false;
            }
        }
        
        // Particle class for effects
        class Particle {
            constructor(x, y, color) {
                this.x = x;
                this.y = y;
                this.size = Math.random() * 5 + 2;
                this.speedX = Math.random() * 6 - 3;
                this.speedY = Math.random() * 6 - 3;
                this.color = color;
                this.life = 30;
            }
            
            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                this.life--;
            }
            
            draw() {
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }
        
        // Create players
        const player1 = new Player(100, 250, '#ff0000', {
            up: 'w',
            down: 's',
            left: 'a',
            right: 'd',
            attack: 'f'
        }, "RED FIGHTER");
        
        const player2 = new Player(600, 250, '#00ff00', {
            up: 'o',
            down: 'l',
            left: 'k',
            right: ';',
            attack: 'j'
        }, "GREEN FIGHTER");
        
        // Update health bars
        function updateHealthBars() {
            document.getElementById('player1Health').style.width = player1.health + '%';
            document.getElementById('player2Health').style.width = player2.health + '%';
        }
        
        // Check for collisions
        function checkCollisions() {
            // Player collision
            const p1Box = player1.getHitBox();
            const p2Box = player2.getHitBox();
            
            if (p1Box.x < p2Box.x + p2Box.width &&
                p1Box.x + p1Box.width > p2Box.x &&
                p1Box.y < p2Box.y + p2Box.height &&
                p1Box.y + p1Box.height > p2Box.y) {
                // Separate players
                const dx = (p1Box.x + p1Box.width/2) - (p2Box.x + p2Box.width/2);
                const dy = (p1Box.y + p1Box.height/2) - (p2Box.y + p2Box.height/2);
                
                if (Math.abs(dx) > Math.abs(dy)) {
                    if (dx > 0) {
                        player1.x += 2;
                        player2.x -= 2;
                    } else {
                        player1.x -= 2;
                        player2.x += 2;
                    }
                } else {
                    if (dy > 0) {
                        player1.y += 2;
                        player2.y -= 2;
                    } else {
                        player1.y -= 2;
                        player2.y += 2;
                    }
                }
            }
            
            // Attack collisions
            const p1Attack = player1.getAttackBox();
            const p2Attack = player2.getAttackBox();
            
            // Player 1 attacks Player 2
            if (p1Attack.width > 0 && 
                p1Attack.x < p2Box.x + p2Box.width &&
                p1Attack.x + p1Attack.width > p2Box.x &&
                p1Attack.y < p2Box.y + p2Box.height &&
                p1Attack.y + p1Attack.height > p2Box.y) {
                const damage = player1.uppercut ? 20 : 10;
                if (player2.takeDamage(damage)) {
                    endGame("Player 1 Wins!");
                }
            }
            
            // Player 2 attacks Player 1
            if (p2Attack.width > 0 && 
                p2Attack.x < p1Box.x + p1Box.width &&
                p2Attack.x + p2Attack.width > p1Box.x &&
                p2Attack.y < p1Box.y + p1Box.height &&
                p2Attack.y + p2Attack.height > p1Box.y) {
                const damage = player2.uppercut ? 20 : 10;
                if (player1.takeDamage(damage)) {
                    endGame("Player 2 Wins!");
                }
            }
        }
        
        // End game
        function endGame(message) {
            gameRunning = false;
            winnerDisplay.textContent = message;
            winnerDisplay.style.display = 'block';
        }
        
        // Restart game
        function restartGame() {
            player1.health = 100;
            player2.health = 100;
            player1.x = 100;
            player1.y = 250;
            player2.x = 600;
            player2.y = 250;
            player1.velocityY = 0;
            player2.velocityY = 0;
            gameRunning = true;
            winnerDisplay.style.display = 'none';
            updateHealthBars();
            particles = [];
        }
        
        // Draw ground
        function drawGround() {
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(0, canvas.height - 20, canvas.width, 20);
            
            ctx.fillStyle = '#228B22';
            ctx.fillRect(0, canvas.height - 20, canvas.width, 5);
        }
        
        // Draw particles
        function drawParticles() {
            for (let i = 0; i < particles.length; i++) {
                particles[i].update();
                particles[i].draw();
                
                if (particles[i].life <= 0) {
                    particles.splice(i, 1);
                    i--;
                }
            }
        }
        
        // Game loop
        function gameLoop() {
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw background
            drawGround();
            
            if (gameRunning) {
                // Update players
                player1.update();
                player2.update();
                
                // Check for collisions
                checkCollisions();
            }
            
            // Draw particles
            drawParticles();
            
            // Draw players
            player1.draw();
            player2.draw();
            
            // Continue game loop
            requestAnimationFrame(gameLoop);
        }
        
        // Event listeners for key presses
        window.addEventListener('keydown', (e) => {
            player1.keys[e.key.toLowerCase()] = true;
            player2.keys[e.key.toLowerCase()] = true;
        });
        
        window.addEventListener('keyup', (e) => {
            player1.keys[e.key.toLowerCase()] = false;
            player2.keys[e.key.toLowerCase()] = false;
        });
        
        // Start the game
        gameLoop();
    </script>
</body>
</html>
